#!/bin/bash

# help
USAGE="Usage: $(basename "$0") [-h] HOST_PORT REMOTE_HOST:REMOTE_PORT -- create an ssh tunnel from from HOST_PORT to REMOTE_HOST:REMOTE_PORT

Options:
    -h          print help
"

while getopts 'h' OPT; do
    case "$OPT" in
        h)
            echo "$USAGE"
            exit
            ;;
        *)
            echo 'Invalid option: '$OPT
            echo $USAGE
            exit 1
    esac
done
shift $((OPTIND - 1))

# do the work
SRC_PORT=$1
DST=`echo $2 | cut -f1 -d:`
DST_PORT=`echo $2 | cut -f2 -d:`

ssh -L $SRC_PORT:localhost:$DST_PORT $DST
